{
  "dashboard": {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": "-- Grafana --",
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "target": {
            "limit": 100,
            "matchAny": false,
            "tags": [],
            "type": "dashboard"
          },
          "type": "dashboard"
        }
      ]
    },
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 1,
    "id": null,
    "links": [],
    "liveNow": false,
    "panels": [
      {
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 0
        },
        "id": 49,
        "title": "HTTP",
        "type": "row"
      },
      {
        "fieldConfig": {
          "defaults": {
            "color": {
              "mode": "palette-classic"
            },
            "custom": {
              "axisLabel": "",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {
                "legend": false,
                "tooltip": false,
                "viz": false
              },
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {
                "type": "linear"
              },
              "showPoints": "auto",
              "spanNulls": false,
              "stacking": {
                "group": "A",
                "mode": "none"
              },
              "thresholdsStyle": {
                "mode": "off"
              }
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "green",
                  "value": null
                },
                {
                  "color": "red",
                  "value": 80
                }
              ]
            }
          },
          "overrides": []
        },
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 0
        },
        "id": 51,
        "options": {
          "legend": {
            "calcs": [],
            "displayMode": "list",
            "placement": "bottom"
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        },
        "title": "Panel Title",
        "type": "timeseries"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 9
        },
        "id": 47,
        "panels": [
          {
            "description": "",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "mappings": [
                  {
                    "options": {
                      "0": {
                        "color": "transparent",
                        "index": 0
                      }
                    },
                    "type": "value"
                  }
                ],
                "max": 1,
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "#EAB839",
                      "value": 1
                    },
                    {
                      "color": "red",
                      "value": 60
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 1
            },
            "id": 45,
            "libraryPanel": {
              "description": "",
              "meta": {
                "connectedDashboards": 3,
                "created": "2022-07-06T23:41:26Z",
                "createdBy": {
                  "avatarUrl": "",
                  "id": 0,
                  "name": ""
                },
                "folderName": "General",
                "folderUid": "",
                "updated": "2022-07-06T23:41:26Z",
                "updatedBy": {
                  "avatarUrl": "",
                  "id": 0,
                  "name": ""
                }
              },
              "name": "Celery Tasks (Active)",
              "type": "bargauge",
              "uid": "ilGck637k",
              "version": 1
            },
            "options": {
              "displayMode": "gradient",
              "minVizHeight": 10,
              "minVizWidth": 0,
              "orientation": "horizontal",
              "reduceOptions": {
                "calcs": [
                  "last"
                ],
                "fields": "",
                "values": false
              },
              "showUnfilled": true
            },
            "pluginVersion": "9.0.2",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "editorMode": "code",
                "exemplar": false,
                "expr": "audius_dn_celery_task_active_duration_seconds{environment=~\"$env\", host=~\"$host\"}",
                "instant": false,
                "legendFormat": "{{task_name}}",
                "range": true,
                "refId": "A"
              }
            ],
            "title": "Celery Tasks (Active)",
            "type": "bargauge"
          }
        ],
        "title": "Celery Tasks",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 10
        },
        "id": 37,
        "panels": [
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Blocks",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 9
            },
            "id": 38,
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "max",
                  "lastNotNull"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Last *",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "audius_dn_health_check_block_difference_current{environment=~\"$env\", host=~\"$host\"}",
                "interval": "",
                "legendFormat": "{{host}}",
                "refId": "A"
              }
            ],
            "title": "Blockdiff",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Block",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 9
            },
            "id": 39,
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "max",
                  "lastNotNull"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Last *",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "8.4.1",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "audius_dn_health_check_latest_block_difference{environment=~\"$env\", host=~\"$host\"}",
                "interval": "",
                "legendFormat": "{{host}}",
                "refId": "A"
              }
            ],
            "title": "Latest Indexed Block",
            "type": "timeseries"
          }
        ],
        "title": "Health Checks",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 11
        },
        "id": 21,
        "panels": [
          {
            "description": "[Census](https://github.com/AudiusProject/load-test-tools/tree/master/census) is a load-test-tool that runs periodically to count the total number of entities that are stored at the database level.\n\nThe population panel shows the total number of entities to date.\n\nThe daily growth panel shows the growth per entity within the past ISO date.",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Population",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 10
            },
            "id": 23,
            "options": {
              "legend": {
                "calcs": [
                  "lastNotNull"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Last *",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "audius_lt_census_population_current{environment=~\"$env\"}",
                "interval": "",
                "legendFormat": "{{entity}}",
                "refId": "A"
              }
            ],
            "title": "Census (Population)",
            "type": "timeseries"
          },
          {
            "description": "[Census](https://github.com/AudiusProject/load-test-tools/tree/master/census) is a load-test-tool that runs periodically to count the total number of entities that are stored at the database level.\n\nThe population panel shows the total number of entities to date.\n\nThe daily growth panel shows the growth per entity within the past ISO date.",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Population",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 10
            },
            "id": 24,
            "options": {
              "legend": {
                "calcs": [
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Max",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "audius_lt_census_growth_current{environment=~\"$env\"}",
                "interval": "",
                "legendFormat": "{{entity}}",
                "refId": "A"
              }
            ],
            "title": "Census (Today's Growth)",
            "type": "timeseries"
          }
        ],
        "title": "Census",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 12
        },
        "id": 9,
        "panels": [
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Requests per Second",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "reqps"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 11,
              "w": 12,
              "x": 0,
              "y": 11
            },
            "id": 18,
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "lastNotNull",
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Max",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "max by (route) (rate(audius_dn_flask_route_latency_seconds_count{environment=~\"$env\", host=~\"$host\"}[5m]))",
                "interval": "",
                "legendFormat": "{{host}}{{route}}",
                "refId": "A"
              }
            ],
            "title": "Route Requests",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Latency",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 11,
              "w": 12,
              "x": 12,
              "y": 11
            },
            "id": 2,
            "links": [],
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "lastNotNull",
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Max",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "8.4.1",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "max by (route) (rate(audius_dn_flask_route_latency_seconds_sum{environment=~\"$env\", host=~\"$host\"}[5m]) / rate(audius_dn_flask_route_latency_seconds_count{environment=~\"$env\", host=~\"$host\"}[5m]))",
                "format": "time_series",
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "{{route}}",
                "refId": "A",
                "step": 60
              }
            ],
            "title": "Average Flask Latency",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Requests per Second",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "reqps"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 11,
              "w": 24,
              "x": 0,
              "y": 22
            },
            "id": 19,
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "lastNotNull",
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Max",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "max by (host, route, code) (rate(audius_dn_flask_route_latency_seconds_count{code!=\"200\", code!=\"\", environment=~\"$env\", host=~\"$host\"}[5m]))",
                "interval": "",
                "legendFormat": "{{host}}{{route}} ({{code}})",
                "refId": "A"
              }
            ],
            "title": "Route Requests Errors",
            "type": "timeseries"
          }
        ],
        "title": "Flask Routes",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 13
        },
        "id": 10,
        "panels": [
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Runs",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 12,
              "x": 0,
              "y": 12
            },
            "id": 3,
            "links": [],
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "lastNotNull",
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Max",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "8.4.1",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "audius_dn_update_aggregate_table_latency_seconds_count{environment=~\"$env\", host=~\"$host\"}",
                "format": "time_series",
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "{{table_name}}",
                "refId": "A",
                "step": 60
              }
            ],
            "title": "Aggregate Task Runs",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Average Runtimes",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 12,
              "x": 12,
              "y": 12
            },
            "id": 4,
            "links": [],
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "lastNotNull",
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Max",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "8.4.1",
            "targets": [
              {
                "expr": "rate(audius_dn_update_aggregate_table_latency_seconds_sum{environment=~\"$env\", host=~\"$host\"}[5m]) / rate(audius_dn_update_aggregate_table_latency_seconds_count{environment=~\"$env\", host=~\"$host\"}[5m])",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "{{table_name}}",
                "refId": "A",
                "step": 60
              }
            ],
            "title": "Average Aggregate Task Runtimes",
            "type": "timeseries"
          }
        ],
        "title": "Aggregate Tasks",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 14
        },
        "id": 11,
        "panels": [
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Runs",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 13
            },
            "id": 14,
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "lastNotNull",
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Max",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "audius_dn_index_metrics_duration_seconds_count{environment=~\"$env\", host=~\"$host\"}",
                "interval": "",
                "legendFormat": "{{task_name}}",
                "refId": "A"
              }
            ],
            "title": "Index Metric Runs",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Runtime",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 13
            },
            "id": 16,
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "lastNotNull",
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Max",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "rate(audius_dn_index_metrics_duration_seconds_sum{environment=~\"$env\", host=~\"$host\"}[5m]) / rate(audius_dn_index_metrics_duration_seconds_count{environment=~\"$env\", host=~\"$host\"}[5m])",
                "interval": "",
                "legendFormat": "{{task_name}}",
                "refId": "A"
              }
            ],
            "title": "Average Index Metrics Runtimes",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Runtime",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 21
            },
            "id": 25,
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "lastNotNull",
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Max",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "max by (scope) (rate(audius_dn_index_blocks_duration_seconds_sum{environment=~\"$env\", host=~\"$host\"}[5m]) / rate(audius_dn_index_blocks_duration_seconds_count{environment=~\"$env\", host=~\"$host\"}[5m]))",
                "interval": "",
                "legendFormat": "{{host}}{{scope}}",
                "refId": "A"
              }
            ],
            "title": "Average Index Block Runtimes",
            "type": "timeseries"
          }
        ],
        "title": "Index Metrics Tasks",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 15
        },
        "id": 33,
        "panels": [
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Runtime",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 14
            },
            "id": 27,
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "lastNotNull",
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Max",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "max by (scope) (rate(audius_dn_track_state_update_duration_seconds_sum{environment=~\"$env\", host=~\"$host\"}[5m]) / rate(audius_dn_track_state_update_duration_seconds_count{environment=~\"$env\", host=~\"$host\"}[5m]))",
                "interval": "",
                "legendFormat": "{{host}}{{scope}}",
                "refId": "A"
              }
            ],
            "title": "Average Track State Runtimes",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Runtime",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 14
            },
            "id": 26,
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "lastNotNull",
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Max",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "max by (scope) (rate(audius_dn_user_state_update_duration_seconds_sum{environment=~\"$env\", host=~\"$host\"}[5m]) / rate(audius_dn_user_state_update_duration_seconds_count{environment=~\"$env\", host=~\"$host\"}[5m]))",
                "interval": "",
                "legendFormat": "{{host}}{{scope}}",
                "refId": "A"
              }
            ],
            "title": "Average User State Runtimes",
            "type": "timeseries"
          }
        ],
        "title": "State Metrics",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 16
        },
        "id": 31,
        "panels": [
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Runtime",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": [
                {
                  "__systemRef": "hideSeriesFrom",
                  "matcher": {
                    "id": "byNames",
                    "options": {
                      "mode": "exclude",
                      "names": [
                        "index_trending_duration"
                      ],
                      "prefix": "All except:",
                      "readOnly": true
                    }
                  },
                  "properties": [
                    {
                      "id": "custom.hideFrom",
                      "value": {
                        "legend": false,
                        "tooltip": false,
                        "viz": true
                      }
                    }
                  ]
                }
              ]
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 15
            },
            "id": 28,
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "lastNotNull",
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Max",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "max by (service) (rate(audius_dn_index_trending_duration_seconds_sum{environment=~\"$env\", host=~\"$host\"}[5m]) / rate(audius_dn_index_trending_duration_seconds_count{environment=~\"$env\", host=~\"$host\"}[5m]))",
                "interval": "",
                "legendFormat": "index_trending_duration",
                "refId": "A"
              }
            ],
            "title": "Average Index Trending Runtimes",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Runtime",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 12,
              "y": 15
            },
            "id": 29,
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "lastNotNull",
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Max",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "max by (mat_view_name) (rate(audius_dn_update_trending_view_duration_seconds_sum{environment=~\"$env\", host=~\"$host\"}[5m]) / rate(audius_dn_update_trending_view_duration_seconds_count{environment=~\"$env\", host=~\"$host\"}[5m]))",
                "interval": "",
                "legendFormat": "{{mat_view_name}}",
                "refId": "A"
              }
            ],
            "title": "Average Update Trending View Runtimes",
            "type": "timeseries"
          }
        ],
        "title": "Trending Metrics",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 17
        },
        "id": 12,
        "panels": [
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Count",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "short"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 12,
              "x": 0,
              "y": 16
            },
            "id": 7,
            "links": [],
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "lastNotNull",
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "8.4.1",
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "audius_loadtest_population_count{environment=~\"$env\", host=~\"$host\"}",
                "format": "time_series",
                "interval": "",
                "intervalFactor": 2,
                "legendFormat": "{{entity}}",
                "refId": "A",
                "step": 60
              }
            ],
            "title": "Population",
            "type": "timeseries"
          },
          {
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "Runtime",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 10,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "never",
                  "spanNulls": true,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 7,
              "w": 12,
              "x": 12,
              "y": 16
            },
            "id": 8,
            "links": [],
            "options": {
              "legend": {
                "calcs": [
                  "mean",
                  "lastNotNull",
                  "max"
                ],
                "displayMode": "table",
                "placement": "bottom"
              },
              "tooltip": {
                "mode": "multi",
                "sort": "desc"
              }
            },
            "pluginVersion": "8.4.1",
            "targets": [
              {
                "expr": "histogram_quantile(0.5, rate(audius_loadtest_population_duration_seconds_bucket{environment=~\"$env\", host=~\"$host\"}[10m]))",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "median",
                "refId": "D",
                "step": 60
              },
              {
                "expr": "histogram_quantile(0.95, rate(audius_loadtest_population_duration_seconds_bucket{environment=~\"$env\", host=~\"$host\"}[10m]))",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "p95",
                "refId": "A",
                "step": 60
              },
              {
                "expr": "histogram_quantile(0.99, rate(audius_loadtest_population_duration_seconds_bucket{environment=~\"$env\", host=~\"$host\"}[10m]))",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "p99",
                "refId": "B",
                "step": 60
              },
              {
                "expr": "histogram_quantile(0.999, rate(audius_loadtest_population_duration_seconds_bucket{environment=~\"$env\", host=~\"$host\"}[10m]))",
                "format": "time_series",
                "intervalFactor": 2,
                "legendFormat": "p999",
                "refId": "C",
                "step": 60
              }
            ],
            "title": "Population Script Runtimes",
            "type": "timeseries"
          }
        ],
        "title": "Population Script",
        "type": "row"
      },
      {
        "collapsed": true,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 18
        },
        "id": 41,
        "panels": [
          {
            "description": "Shows how long the longest running task (across all nodes) has been running.\n\nCurrently, metrics will not reset a stat back to 0 upon completion, so you'll see horizontal lines indicating it hasn't run since the last metric was updated.\n\nDips to 0 mean the task has started again.\n\nDips to non-0 mean that while the current task has completed, the same task was running in parallel on another node, and the metric is showing the new currently running longest task.",
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "palette-classic"
                },
                "custom": {
                  "axisLabel": "",
                  "axisPlacement": "auto",
                  "barAlignment": 0,
                  "drawStyle": "line",
                  "fillOpacity": 0,
                  "gradientMode": "none",
                  "hideFrom": {
                    "legend": false,
                    "tooltip": false,
                    "viz": false
                  },
                  "lineInterpolation": "linear",
                  "lineWidth": 1,
                  "pointSize": 5,
                  "scaleDistribution": {
                    "type": "linear"
                  },
                  "showPoints": "auto",
                  "spanNulls": false,
                  "stacking": {
                    "group": "A",
                    "mode": "none"
                  },
                  "thresholdsStyle": {
                    "mode": "off"
                  }
                },
                "mappings": [],
                "thresholds": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                },
                "unit": "s"
              },
              "overrides": []
            },
            "gridPos": {
              "h": 8,
              "w": 12,
              "x": 0,
              "y": 17
            },
            "id": 43,
            "options": {
              "legend": {
                "calcs": [
                  "last"
                ],
                "displayMode": "table",
                "placement": "bottom",
                "sortBy": "Last",
                "sortDesc": true
              },
              "tooltip": {
                "mode": "single",
                "sort": "none"
              }
            },
            "targets": [
              {
                "datasource": {
                  "type": "prometheus"
                },
                "exemplar": true,
                "expr": "max by (task_name) (audius_dn_celery_running_tasks{environment=~\"$env\", host=~\"$host\"})",
                "interval": "",
                "legendFormat": "{{task_name}}",
                "refId": "A"
              }
            ],
            "title": "In Progress Runtimes",
            "type": "timeseries"
          }
        ],
        "title": "Celery Tasks",
        "type": "row"
      }
    ],
    "refresh": "30m",
    "schemaVersion": 36,
    "style": "dark",
    "tags": [],
    "templating": {
      "list": [
        {
          "allValue": ".*",
          "datasource": {
            "type": "prometheus"
          },
          "definition": "label_values(audius_dn_flask_route_latency_seconds_count, environment)",
          "description": "",
          "hide": 0,
          "includeAll": true,
          "label": "Environment",
          "multi": false,
          "name": "env",
          "options": [],
          "query": {
            "query": "label_values(audius_dn_flask_route_latency_seconds_count, environment)",
            "refId": "StandardVariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "sort": 2,
          "type": "query"
        },
        {
          "allValue": ".*",
          "datasource": {
            "type": "prometheus"
          },
          "definition": "label_values(audius_dn_flask_route_latency_seconds_count{environment=~\"$env\"}, host)",
          "description": "",
          "hide": 0,
          "includeAll": true,
          "label": "Host",
          "multi": false,
          "name": "host",
          "options": [],
          "query": {
            "query": "label_values(audius_dn_flask_route_latency_seconds_count{environment=~\"$env\"}, host)",
            "refId": "StandardVariableQuery"
          },
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "sort": 1,
          "type": "query"
        }
      ]
    },
    "time": {
      "from": "now-2h",
      "to": "now"
    },
    "timepicker": {
      "nowDelay": "1m",
      "refresh_intervals": [
        "5s",
        "10s",
        "30s",
        "1m",
        "5m",
        "15m",
        "30m",
        "1h",
        "2h",
        "1d"
      ],
      "time_options": [
        "5m",
        "15m",
        "1h",
        "6h",
        "12h",
        "24h",
        "2d",
        "7d",
        "30d"
      ]
    },
    "timezone": "",
    "title": "Joaquin - Playground",
    "uid": "000000002",
    "version": null,
    "weekStart": ""
  },
  "overwrite": true
}
